## Introduction ----
## This is a global file for data generation and processing
## Author: Erin_707

## Load relevant packages ----
packages <- c("shiny", "shinydashboard", "tidyverse", "plotly",
              "ggplot2", "DT", "scales", "here", "EdSurvey")

require_package <- function(package_tmp) {
  if(!require(package_tmp, character.only = TRUE)){
    install.packages(package_tmp)
  }
  library(package_tmp, character.only = TRUE)
}

for(i in seq_along(packages)) {
  require_package(packages[[i]])}

data_path <- here("data")

## Load data ----
## Note that this oonly needs to be done once

data_pisa <- readPISA(path = "~/PISA/2018", database = "INT", countries = "sgp")
EdSurvey::downloadPISA(root = data_path,
                       years = c(2012, 2015, 2018),
                       database = "INT",
                       cache = FALSE,
                       verbose = TRUE)
